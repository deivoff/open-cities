{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\n/* eslint-disable react/jsx-no-undef */\n// pages/Comments.js\nimport React, { Component } from 'react';\nimport Head from 'next/head';\nimport API from '../utils/api-client';\nimport { withSSR } from '../utils/_ssr';\n\nrequire('../frontend/static/styles/main.styl');\n\nvar CommentsScreen =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(CommentsScreen, _Component);\n\n  function CommentsScreen() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, CommentsScreen);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(CommentsScreen)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      text: '',\n      loading: false,\n      error: null\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleTextChange\", function (e) {\n      _this.setState({\n        text: e.target.value\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleSubmit\",\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee(e) {\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                e.preventDefault();\n\n                _this.setState({\n                  loading: true,\n                  error: null\n                });\n\n                _context.prev = 2;\n\n                if (_this.state.text) {\n                  _context.next = 5;\n                  break;\n                }\n\n                throw new Error('Empty comment not allowed');\n\n              case 5:\n                _context.next = 7;\n                return API.post('/api/comments', {\n                  comment: _this.state.text\n                });\n\n              case 7:\n                // Get the updated list\n                // Update state\n                _this.setState({\n                  error: null,\n                  text: ''\n                });\n\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](2);\n\n                _this.setState({\n                  error: _context.t0\n                });\n\n              case 13:\n                _context.prev = 13;\n\n                _this.setState({\n                  loading: false\n                });\n\n                return _context.finish(13);\n\n              case 16:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[2, 10, 13, 16]]);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }());\n\n    return _this;\n  }\n\n  _createClass(CommentsScreen, [{\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          loading = _this$state.loading,\n          text = _this$state.text,\n          error = _this$state.error;\n      return React.createElement(\"div\", this.props, React.createElement(Head, null, React.createElement(\"title\", null, \"Comments | Koa + Next.js\")), React.createElement(\"div\", null, React.createElement(\"h1\", null, \"Comments:\"), React.createElement(\"form\", {\n        onSubmit: this.handleSubmit\n      }, React.createElement(\"input\", {\n        type: \"text\",\n        value: text,\n        onChange: this.handleTextChange\n      }), React.createElement(\"input\", {\n        type: \"submit\",\n        value: loading ? 'Loading...' : 'Submit',\n        disabled: loading\n      })), error && React.createElement(\"p\", null, \"Error: \", error)));\n    }\n  }]);\n\n  return CommentsScreen;\n}(Component);\n\n_defineProperty(CommentsScreen, \"defaultProps\", {\n  comments: []\n});\n\nexport default withSSR()(CommentsScreen);","map":null,"metadata":{},"sourceType":"module"}